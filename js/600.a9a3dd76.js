"use strict";(self["webpackChunkdjari_clothe"]=self["webpackChunkdjari_clothe"]||[]).push([[600],{9600:function(e,t,s){s.r(t),s.d(t,{default:function(){return J}});var i=s(6252),l=s(3577),a=s(6816);const o=e=>((0,i.dD)("data-v-f265b72c"),e=e(),(0,i.Cn)(),e),r={id:"container01"},c={id:"filter"},n=o((()=>(0,i._)("h5",null,"FILTRADO POR",-1))),h={id:"filters-box"},_={class:"filter-set"},g=o((()=>(0,i._)("h4",null,"Marcas",-1))),d={class:"form-check"},p=["value"],u={class:"form-check-label",for:"check_marca"},f={class:"filter-set"},m=o((()=>(0,i._)("h4",null,"Tallas",-1))),v={class:"form-check"},F=["value"],k={class:"form-check-label",for:"check_talla"},D={id:"show-filter"},b=o((()=>(0,i._)("img",{class:"ficon no-items",src:a,alt:"shopcar icon"},null,-1))),w=o((()=>(0,i._)("p",{class:"description-no-items"},"No se encontraron items",-1))),x=[b,w],C={class:"items"},I=["virtualIndex"],S={class:"item-div"},y=["href"],P={class:"figure-item"},z=["src"],L={class:"info"},M={class:"info-name"},O={class:"info-price"},H={class:"item-opciones"},K=["href"],Y=o((()=>(0,i._)("div",null,"Probar",-1))),A=[Y],B=["onClick"],E=["src"],j={class:"paginationBar","aria-label":"..."},q={class:"pagination pagination-md"},R=["onClick"];function T(e,t,s,a,o,b){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",c,[n,(0,i._)("button",{type:"button",class:(0,l.C_)(["btn btn-danger",o.deleteFilters?"deleteFilters-active":"deleteFilters-no-active"]),onClick:t[0]||(t[0]=(...e)=>b.displayDeleteFilters&&b.displayDeleteFilters(...e))},"X Borrar Filtros",2),(0,i._)("form",h,[(0,i._)("fieldset",_,[g,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.marca_filters,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s},[(0,i._)("div",d,[(0,i._)("input",{onClick:t[1]||(t[1]=(...e)=>b.getData&&b.getData(...e)),class:"form-check-input",name:"marca_selected",value:[e,s],type:"checkbox",id:"check_marca"},null,8,p),(0,i._)("label",u,(0,l.zw)(e),1)])])))),128))]),(0,i._)("fieldset",f,[m,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.talla_filters,((e,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s},[(0,i._)("div",v,[(0,i._)("input",{onClick:t[2]||(t[2]=(...e)=>b.getData&&b.getData(...e)),class:"form-check-input",name:"talla_selected",value:[e,s],type:"checkbox",id:"check_talla"},null,8,F),(0,i._)("label",k,(0,l.zw)(e),1)])])))),128))])])]),(0,i._)("div",D,[(0,i._)("div",{class:(0,l.C_)(0===o.polos_items.length?"no-items-found-active":"no-items-found-no-active")},x,2),(0,i._)("div",{class:(0,l.C_)(o.polos_items.length>0?"show-catalog":"no-items-found-active")},[(0,i._)("div",C,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.polos_items,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"card",key:e.id,virtualIndex:e.id},[(0,i._)("div",S,[(0,i._)("a",{class:"item-content",href:"/items/"+e.id},[(0,i._)("div",null,[(0,i._)("figure",P,[(0,i._)("img",{class:"image-item",src:e.get_image,alt:""},null,8,z)]),(0,i._)("div",L,[(0,i._)("p",M,(0,l.zw)(e.name_modelo),1),(0,i._)("p",O,"S/. "+(0,l.zw)(e.price),1)])])],8,y),(0,i._)("div",H,[(0,i._)("a",{class:"bton-special anchor",href:"/try-on/"+e.id},A,8,K),(0,i._)("a",{class:(0,l.C_)(["anchor",o.userSession?"favo-icon":"favo-no-icon"]),onClick:t=>b.addFavorite(e.id),href:"#"},[(0,i._)("img",{src:o.isFavorite.indexOf(e.id)>-1?b.changeIcon(!0):b.changeIcon(!1),class:"ficon"},null,8,E)],10,B)])])],8,I)))),128))]),(0,i._)("nav",j,[(0,i._)("ul",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,l.C_)(["page-item",{active:e==o.current_page}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>b.nextPage(e),href:"#"},(0,l.zw)(e),9,R)],2)))),128))])])],2)])])}var U=s(9669),N=s.n(U),X={name:"MyCatalog",components:{},data(){return{isFavorite:[],polos_items:[],current_page:1,pages:1,isLoading:!1,cor_filters:[],marca_filters:[],talla_filters:[],price_filters:[],deleteFilters:!1,catalogo_url:"/api/catalogo/polos/?page=",filtro_url:"/api/catalogo/filter_polos/?page=",tmp_search_filter_url:"",filtro_url_tmp:"",searchFilter:!1,itemFound:!1,userSession:!1}},mounted(){this.checkUserSession(),this.checkFavoritesStorage(),this.isLoading=!0,this.nextPage(),this.getFilters()},methods:{nextPage(e,t=""){if(0!=t.length||this.searchFilter)if(0==t.length&&this.searchFilter)e=e||this.current_page,N().get(this.filtro_url_tmp+e+this.tmp_search_filter_url).then((t=>{this.polos=t.data.results,this.pages=Math.ceil(t.data.count/6),this.current_page=e,this.polos_items=this.polos})).catch((e=>{console.log(e)}));else{this.searchFilter=!0,t=t.slice(1);var s=this.filtro_url.slice(0,-5),i=t.split("&");s+=i[0]+"&page=",t=t.slice(i[0].length),this.tmp_search_filter_url=t,this.filtro_url_tmp=s,this.current_page=1,this.pages=1,e=e||this.current_page,N().get(this.filtro_url_tmp+e+this.tmp_search_filter_url).then((t=>{this.polos=t.data.results,this.pages=Math.ceil(t.data.count/6),this.current_page=e,this.polos_items=this.polos})).catch((e=>{console.log(e)}))}else this.isLoading=!0,e=e||this.current_page,N().get(this.catalogo_url+e).then((t=>{this.polos=t.data.results,console.log(this.polos),this.pages=Math.ceil(t.data.count/6),this.current_page=e,this.polos_items=this.polos})).catch((e=>{console.log(e)})),this.isLoading=!1},getFilters(){N().get("/api/catalogo/filters/").then((e=>{this.data=e.data,this.cor_filters=this.data.colores,this.marca_filters=this.data.marcas,this.talla_filters=this.data.tallas,this.price_filters=this.data.rango_precio})).catch((e=>{console.log(e)}))},getData(){!1===this.deleteFilters&&(this.deleteFilters=!0);var e=document.querySelectorAll("input:checked");0==e.length&&(this.deleteFilters=!1,this.searchFilter=!1,this.nextPage(1));const t=document.getElementById("filters-box"),s=new FormData(t),i={list_colors:[],range_price:[],list_tallas:[],list_marcas:[]};for(var l of s.entries()){const e=l[0].split("_");if("selected"===e[1]){const t=l[1].split(",");"cor"===e[0]?i["list_colors"].push(parseInt(t[1])+1):"marca"===e[0]?i["list_marcas"].push(parseInt(t[1])+1):"talla"===e[0]&&i["list_tallas"].push(t[0])}}i["range_price"]=this.price_filters;var a="?";for(const o in i)if(i[o].length>0){a+=o+"=";for(const e of i[o])a+=e+",";a=a.slice(0,-1),a+="&"}a=a.slice(0,-1),this.nextPage(1,a)},displayDeleteFilters(){var e=document.querySelectorAll("input:checked");if(0!==e.length)for(var t=0;t<e.length;t++)e[t].checked=!1;this.searchFilter=!1,this.nextPage(1),this.deleteFilters=!1},addFavorite(e){this.isFavorite.indexOf(e)>-1?this.isFavorite.splice(this.isFavorite.indexOf(e),1):this.isFavorite.push(e),0==this.isFavorite.length?localStorage.removeItem("list_favorites"):localStorage.setItem("list_favorites",this.isFavorite);const t={id_polo:null,id_user:null};t["id_polo"]=e,t["id_user"]=localStorage.getItem("user_session"),N().post("/api/registerPoloFavorite/",t).then((e=>{this.msg=e.data,console.log(this.msg)})).catch((e=>{console.log(e)}))},changeIcon(e){return s(!1===e?3972:8397)},checkUserSession(){const e=localStorage.getItem("user_session");null!=e?this.userSession=!0:this.activeSession=!1},checkFavoritesStorage(){const e=localStorage.getItem("list_favorites"),t=[];if(null!=e){const s=e.split(",");s.forEach((e=>t.push(parseInt(e)))),t.forEach((e=>this.isFavorite.push(e)))}}}},Z=s(3744);const G=(0,Z.Z)(X,[["render",T],["__scopeId","data-v-f265b72c"]]);var J=G},6816:function(e,t,s){e.exports=s.p+"img/shopcar.f9938763.svg"}}]);
//# sourceMappingURL=600.a9a3dd76.js.map